{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./blocks/src/edit.js","webpack:///./blocks/src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__","wp","i18n","element","Component","Fragment","components","IconButton","DropZone","Icon","PanelBody","FormFileUpload","RangeControl","CheckboxControl","SelectControl","Toolbar","withNotices","editor","BlockControls","MediaUpload","MediaPlaceholder","InspectorControls","mediaUpload","meowGalleryIcon","React","createElement","width","height","viewBox","fill","xmlns","linkOptions","label","ALLOWED_MEDIA_TYPES","pickRelevantMediaFiles","image","alt","id","link","url","caption","GalleryEdit","_this","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","apply","arguments","onSelectImages","_assertThisInitialized","setLinkTo","setColumns","addFiles","uploadFromFiles","state","isBusy","selectedImage","images","newImages","map","props","setAttributes","onRefresh","linkTo","useDefaults","captions","gutter","htmlPreview","attributes","wplrCollection","wplrFolder","rowHeight","length","col","mgl_gallery_block_params","wplr_collections","find","x","wp_col_id","is_folder","columns","layout","animation","newAttributes","ids","setState","fetch","concat","wpApiSettings","root","cache","headers","user-agent","content-type","method","redirect","referrer","body","JSON","stringify","wplr-collection","wplr-folder","row-height","then","returned","_this2","ok","Error","response","json","data","event","target","files","_this3","currentImages","_this$props","noticeOperations","allowedTypes","filesList","onFileChange","imagesNormalized","onError","createErrorNotice","window","mglCalculateRow","console","log","mglInitCarousels","refreshTiles","refreshCarousel","prevProps","_this4","_this$props2","className","isSelected","noticeUI","dropZone","onFilesDrop","hasImagesToShow","controls","onSelect","multiple","gallery","img","render","_ref","open","icon","onClick","setGalleryEmpty","wplrCollections","categories","level","padStart","disabled","unshift","onChange","setWplrCollection","options","accept","labels","title","instructions","notices","setLayout","setAnimation","min","max","setGutter","setRowHeight","checked","setCaptions","setUseDefaults","style","dangerouslySetInnerHTML","__html","cursor","blocks","registerBlockType","createBlock","blockAttributes","src_defineProperty","_blockAttributes","type","default","buildShortcode","attrs","align","join","trim","buildCoreAttributes","alert","description","category","keywords","supports","edit","save","str","src_Fragment","deprecated","_ref2","replace","transforms","from","isMultiBlock","transform","_ref3"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const { __ } = wp.i18n;\nconst { Component, Fragment } = wp.element;\nconst { IconButton, Icon, DropZone, FormFileUpload, PanelBody, RangeControl,\n\tCheckboxControl, SelectControl, Toolbar, withNotices } = wp.components;\nconst { BlockControls, MediaUpload, MediaPlaceholder, InspectorControls, mediaUpload } = wp.editor;\n\nconst meowGalleryIcon = (<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<rect width=\"20\" height=\"20\" />\n\t\t<path d=\"M16.6667 3.33334V13.3333H6.66667V3.33334H16.6667ZM16.6667 1.66667H6.66667L5 3.33334V13.3333L6.66667 15H16.6667L18.3333 13.3333V3.33334L16.6667 1.66667Z\" fill=\"#2D4B6D\"/>\n\t\t<path d=\"M10 10L10.8333 11.6667L13.3333 9.16667L15.8333 12.5H7.5L10 10Z\" fill=\"#1ABC9C\"/>\n\t\t<path d=\"M1.66667 5V16.6667L3.33333 18.3333H15V16.6667H3.33333V5H1.66667Z\" fill=\"#2D4B6D\"/>\n</svg>)\n\nconst linkOptions = [\n\t{ value: 'attachment', label: __( 'Attachment Page' ) },\n\t{ value: 'media', label: __( 'Media File' ) },\n\t{ value: 'none', label: __( 'None' ) },\n];\nconst ALLOWED_MEDIA_TYPES = [ 'image' ];\n\nexport const pickRelevantMediaFiles = ( image ) => {\n\tlet { alt, id, link, url, caption } = image;\n\treturn { alt, id, link, url, caption };\n};\n\nclass GalleryEdit extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.onSelectImages = this.onSelectImages.bind( this );\n\t\tthis.setLinkTo = this.setLinkTo.bind( this );\n\t\tthis.setColumns = this.setColumns.bind( this );\n\t\tthis.addFiles = this.addFiles.bind( this );\n\t\tthis.uploadFromFiles = this.uploadFromFiles.bind( this );\n\n\t\tthis.state = {\n\t\t\tisBusy: false,\n\t\t\tselectedImage: null,\n\t\t};\n\t}\n\n\tonSelectImages( images ) {\n\t\tlet newImages = images.map(image => pickRelevantMediaFiles(image));\n\t\tthis.props.setAttributes({ images: newImages });\n\t\tthis.onRefresh({ images: newImages });\n\n\t}\n\n\tsetLinkTo( value ) {\n\t\tthis.props.setAttributes({ linkTo: value });\n\t}\n\n\tsetUseDefaults( value ) {\n\t\tthis.props.setAttributes({ useDefaults: value });\n\t\tthis.onRefresh({ useDefaults: value });\n\t}\n\n\tsetCaptions( value ) {\n\t\tthis.props.setAttributes({ captions: value });\n\t\tthis.onRefresh({ captions: value });\n\t}\n\n\tsetGutter( value ) {\n\t\tthis.props.setAttributes({ gutter: value });\n\t\tthis.onRefresh({ gutter: value });\n\t}\n\n\tsetGalleryEmpty() {\n\t\tthis.props.setAttributes({ 'images': [], htmlPreview: '' });\n\t\tif (this.props.attributes.wplrCollection || this.props.attributes.wplrFolder)\n\t\t\tthis.onRefresh({ 'images': [] });\n\t}\n\n\tsetRowHeight(value) {\n\t\tthis.props.setAttributes({ 'rowHeight': value });\n\t\tthis.onRefresh({ 'rowHeight': value });\n\t}\n\n\tsetWplrCollection(value) {\n\t\tif (!value || value === '') {\n\t\t\tthis.props.setAttributes({ 'wplrCollection': '', 'wplrFolder': '', htmlPreview: '' });\n\t\t\tif (this.props.attributes.images.length)\n\t\t\t\tthis.onRefresh({ 'wplrCollection': '', 'wplrFolder': '' });\n\t\t\treturn;\n\t\t}\n\t\tconst col = mgl_gallery_block_params.wplr_collections.find(x => x.wp_col_id === value);\n\t\tcol.is_folder = col.is_folder === '1';\n\t\tthis.props.setAttributes({ 'wplrCollection': col.is_folder ? '' : value, 'wplrFolder': col.is_folder ? value : '' });\n\t\tthis.onRefresh({ 'wplrCollection': col.is_folder ? '' : value, 'wplrFolder': col.is_folder ? value : '' });\n\t}\n\n\tsetColumns(value) {\n\t\tthis.props.setAttributes({ columns: value });\n\t\tthis.onRefresh({ columns: value });\n\t}\n\n\tsetLayout(layout) {\n\t\tthis.props.setAttributes({ layout: layout });\n\t\tthis.onRefresh({ layout });\n\t}\n\n\tsetAnimation(animation) {\n\t\tthis.props.setAttributes({ animation: animation });\n\t\tthis.onRefresh({ animation });\n\t}\n\n\tasync onRefresh(newAttributes = {}) {\n\t\tlet attributes = { ...this.props.attributes, ...newAttributes }\n\t\tconst ids = attributes.images.map(x => x.id);\n\t\tconst { layout, useDefaults, animation, gutter, columns, rowHeight,\n\t\t\tcaptions, wplrCollection, wplrFolder } = attributes;\n\t\tthis.setState( { isBusy: true } );\n\t\tconst response = await fetch( `${wpApiSettings.root}meow_gallery/preview`, {\n\t\t\tcache: 'no-cache',\n\t\t\theaders: { 'user-agent': 'WP Block', 'content-type': 'application/json' },\n\t\t\tmethod: 'POST',\n\t\t\tredirect: 'follow',\n\t\t\treferrer: 'no-referrer',\n\t\t\tbody: useDefaults ?\n\t\t\t\tJSON.stringify({ ids, layout, 'wplr-collection': wplrCollection, 'wplr-folder': wplrFolder }) :\n\t\t\t\tJSON.stringify({ ids, layout, gutter, columns, 'row-height': rowHeight, animation,\n\t\t\t\t\tcaptions, 'wplr-collection': wplrCollection, 'wplr-folder': wplrFolder })\n\t\t})\n\t\t.then(returned => {\n\t\t\t\tthis.setState({ isBusy: false });\n\t\t\t\tif (returned.ok)\n\t\t\t\t\treturn returned;\n\t\t\t\tthrow new Error('Network response was not ok.');\n\t\t\t}\n\t\t);\n\t\tlet data = await response.json();\n\t\tthis.props.setAttributes( { htmlPreview: data } );\n\t};\n\n\tuploadFromFiles( event ) {\n\t\tthis.addFiles( event.target.files );\n\t}\n\n\taddFiles( files ) {\n\t\tconst currentImages = this.props.attributes.images || [];\n\t\tconst { noticeOperations, setAttributes } = this.props;\n\t\tmediaUpload( {\n\t\t\tallowedTypes: ALLOWED_MEDIA_TYPES,\n\t\t\tfilesList: files,\n\t\t\tonFileChange: ( images ) => {\n\t\t\t\tconst imagesNormalized = images.map( ( image ) => pickRelevantMediaFiles( image ) );\n\t\t\t\tlet newImages = currentImages.concat( imagesNormalized );\n\t\t\t\tsetAttributes({ images: newImages });\n\t\t\t\tthis.onRefresh({ images: newImages });\n\t\t\t},\n\t\t\tonError: noticeOperations.createErrorNotice,\n\t\t} );\n\t}\n\n\trefreshTiles() {\n\t\tif (window.mglCalculateRow)\n\t\t\tmglCalculateRow();\n\t\telse\n\t\t\tconsole.log('Meow Gallery: mglCalculateRow does not exist.');\n\t}\n\n\trefreshCarousel() {\n\t\tif (window.mglInitCarousels)\n\t\t\tmglInitCarousels();\n\t\telse\n\t\t\tconsole.log('Meow Gallery: mglInitCarousels does not exist.');\n\t}\n\n\tcomponentDidMount() {\n\t\tif (!this.props.attributes.layout)\n\t\t\tthis.props.setAttributes({ layout: 'tiles' });\n\t\tif (this.props.attributes.layout === 'tiles')\n\t\t\tthis.refreshTiles();\n\t\tif (this.props.attributes.layout === 'carousel')\n\t\t\tthis.refreshCarousel();\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif (this.props.attributes.layout === 'tiles')\n\t\t\tthis.refreshTiles();\n\t\tif (this.props.attributes.layout === 'carousel')\n\t\t\tthis.refreshCarousel();\n\t}\n\n\trender() {\n\t\tconst { isBusy } = this.state;\n\t\tconst { attributes, isSelected, className, noticeOperations, noticeUI } = this.props;\n\t\tconst { layout, useDefaults, images, gutter, columns, rowHeight, htmlPreview, animation,\n\t\t\tcaptions, wplrCollection, wplrFolder, linkTo } = attributes;\n\t\tconst dropZone = (<DropZone onFilesDrop={ this.addFiles } />);\n\t\tconst hasImagesToShow =  images.length > 0 || !!wplrCollection || !!wplrFolder;\n\n\t\tconst controls = (\n\t\t\t<BlockControls>\n\t\t\t{hasImagesToShow && (\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<MediaUpload\n\t\t\t\t\t\tonSelect={ this.onSelectImages } allowedTypes={ ALLOWED_MEDIA_TYPES } multiple gallery\n\t\t\t\t\t\tvalue={ images.map( ( img ) => img.id ) }\n\t\t\t\t\t\trender={ ({ open }) => (\n\t\t\t\t\t\t\t<IconButton className=\"components-toolbar__control\" label={ __( 'Edit Gallery' ) }\n\t\t\t\t\t\t\t\ticon=\"edit\" onClick={ open } />\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<IconButton className=\"components-toolbar__control\" label={ __( 'Remove all' ) }\n\t\t\t\t\t\ticon=\"minus\" onClick={() => this.setGalleryEmpty()} />\n\t\t\t\t\t<IconButton className=\"components-toolbar__control\" label={ __( 'Refresh' ) }\n\t\t\t\t\t\ticon=\"controls-repeat\" onClick={() => this.onRefresh()} />\n\t\t\t\t</Toolbar>\n\t\t\t)}\n\t\t\t</BlockControls>\n\t\t);\n\n\t\tlet wplrCollections = '';\n\t\tif (window.mgl_gallery_block_params && mgl_gallery_block_params.wplr_collections) {\n\t\t\tlet categories = mgl_gallery_block_params.wplr_collections.map(x => {\n\t\t\t\treturn {\n\t\t\t\t\tlabel: (x.level > 0 ? '- ' : '') + x.name.padStart(x.name.length + x.level, \" \"),\n\t\t\t\t\tvalue: x.wp_col_id,\n\t\t\t\t\tdisabled: x.is_folder === 'true'\n\t\t\t\t};\n\t\t\t});\n\t\t\tcategories.unshift({ label: 'None', value: '' });\n\t\t\twplrCollections = (\n\t\t\t\t<SelectControl\n\t\t\t\t\tlabel={__('LR Folder or Collection', 'meow-gallery')}\n\t\t\t\t\tvalue={wplrCollection ? wplrCollection : wplrFolder}\n\t\t\t\t\tonChange={value => this.setWplrCollection(value)}\n\t\t\t\t\toptions={categories}>\n\t\t\t\t</SelectControl>)\n\t\t}\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t{ controls }\n\t\t\t\t{ !hasImagesToShow &&\n\t\t\t\t\t<MediaPlaceholder icon={meowGalleryIcon} className={ className } multiple accept=\"image/*\"\n\t\t\t\t\t\tlabels={ {\n\t\t\t\t\t\t\ttitle: __( 'Meow Gallery' ),\n\t\t\t\t\t\t\tinstructions: __( 'Drag images, upload new ones or select files from your library. If WP/LR Sync is installed, you can directly select a collection or a folder from Lightroom.' ),\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonSelect={ this.onSelectImages }\n\t\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\t\tnotices={ noticeUI }\n\t\t\t\t\t\tonError={ noticeOperations.createErrorNotice }\n\t\t\t\t\t/> }\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Gallery Settings' ) }>\n\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\tlabel={__('Layout', 'meow-gallery')}\n\t\t\t\t\t\t\tvalue={layout}\n\t\t\t\t\t\t\tonChange={(value) => this.setLayout(value)}\n\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t{ value: 'default', label: 'Default' },\n\t\t\t\t\t\t\t\t{ value: 'tiles', label: 'Tiles' },\n\t\t\t\t\t\t\t\t{ value: 'masonry', label: 'Masonry' },\n\t\t\t\t\t\t\t\t{ value: 'justified', label: 'Justified' },\n\t\t\t\t\t\t\t\t{ value: 'square', label: 'Square' },\n\t\t\t\t\t\t\t\t{ value: 'cascade', label: 'Cascade' },\n\t\t\t\t\t\t\t\t{ value: 'carousel', label: 'Carousel' }\n\t\t\t\t\t\t\t]}>\n\t\t\t\t\t\t</SelectControl>\n\t\t\t\t\t\t{ hasImagesToShow && !useDefaults &&\n\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\tlabel={__('Animation', 'meow-gallery')}\n\t\t\t\t\t\t\t\tvalue={animation}\n\t\t\t\t\t\t\t\tonChange={(value) => this.setAnimation(value)}\n\t\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t\t{ value: 'default', label: 'Default' },\n\t\t\t\t\t\t\t\t\t{ value: 'zoom-out', label: 'Zoom Out' },\n\t\t\t\t\t\t\t\t\t{ value: 'zoom-in', label: 'Zoom In' },\n\t\t\t\t\t\t\t\t\t{ value: 'fade-out', label: 'Fade Out' },\n\t\t\t\t\t\t\t\t\t{ value: 'fade-in', label: 'Fade In' },\n\t\t\t\t\t\t\t\t\t{ value: 'colorize', label: 'Colorize' },\n\t\t\t\t\t\t\t\t\t{ value: 'highlight', label: 'Highlight' }\n\t\t\t\t\t\t\t\t]}>\n\t\t\t\t\t\t\t</SelectControl>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\tlabel={ __( 'Link To' ) }\n\t\t\t\t\t\t\tvalue={ linkTo }\n\t\t\t\t\t\t\tonChange={ this.setLinkTo }\n\t\t\t\t\t\t\toptions={ linkOptions }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{wplrCollections}\n\t\t\t\t\t\t{ hasImagesToShow && !useDefaults && <RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Gutter' ) } value={ gutter } min={ 0 } max={ 100 }\n\t\t\t\t\t\t\tonChange={ value => this.setGutter(value) }\n\t\t\t\t\t\t/> }\n\t\t\t\t\t\t{ hasImagesToShow && !useDefaults && (layout === 'masonry' || layout === 'square') && <RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Columns' ) } value={columns} min={2} max={5}\n\t\t\t\t\t\t\tonChange={ value => this.setColumns(value) }\n\t\t\t\t\t\t/> }\n\t\t\t\t\t\t{ hasImagesToShow && !useDefaults && (layout === 'justified') && <RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Row Height' ) } value={rowHeight} min={50} max={500}\n\t\t\t\t\t\t\tonChange={ value => this.setRowHeight(value) }\n\t\t\t\t\t\t/> }\n\t\t\t\t\t\t{ hasImagesToShow && !useDefaults && <CheckboxControl\n\t\t\t\t\t\t\tlabel={ __( 'Captions' ) } checked={ captions }\n\t\t\t\t\t\t\tonChange={ value => this.setCaptions(value) }\n\t\t\t\t\t\t/> }\n\t\t\t\t\t\t{ hasImagesToShow && <CheckboxControl\n\t\t\t\t\t\t\tlabel={ __( 'Use Default Settings' ) } checked={ useDefaults }\n\t\t\t\t\t\t\tonChange={ value => this.setUseDefaults(value) }\n\t\t\t\t\t\t/> }\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\t\t\t\t{ noticeUI }\n\t\t\t\t<div>\n\t\t\t\t\t{ dropZone }\n\t\t\t\t\t{isBusy && (<div className={'mgl-gtb-container' + (isBusy ? ' mgl-busy' : '')}>\n\t\t\t\t\t\t<span className='components-spinner' style={{  }} /></div>)}\n\t\t\t\t\t{htmlPreview && (<div dangerouslySetInnerHTML={{__html: htmlPreview}}></div>)}\n\t\t\t\t\t{hasImagesToShow && !htmlPreview && (<p>Please <a style={{cursor: 'pointer'}}\n\t\t\t\t\t\tonClick={() => this.onRefresh()}>click here</a> to refresh the preview.</p>)}\n\t\t\t\t\t{/* {!hasImagesToShow && isSelected &&\n\t\t\t\t\t\t<div className=\"blocks-gallery-item has-add-item-button\">\n\t\t\t\t\t\t\t<FormFileUpload multiple isLarge className=\"block-library-gallery-add-item-button\"\n\t\t\t\t\t\t\t\tonChange={ this.uploadFromFiles } accept=\"image/*\" icon=\"insert\">\n\t\t\t\t\t\t\t\t{ __( 'Upload an image' ) }\n\t\t\t\t\t\t\t</FormFileUpload>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t} */}\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nexport default withNotices( GalleryEdit );","const { __ } = wp.i18n;\nconst { Fragment } = wp.element;\nconst { registerBlockType, createBlock } = wp.blocks;\n\nimport { default as edit } from './edit';\n\nconst meowGalleryIcon = (<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<rect width=\"20\" height=\"20\" fill=\"white\"/>\n\t\t<path d=\"M16.6667 3.33334V13.3333H6.66667V3.33334H16.6667ZM16.6667 1.66667H6.66667L5 3.33334V13.3333L6.66667 15H16.6667L18.3333 13.3333V3.33334L16.6667 1.66667Z\" fill=\"#2D4B6D\"/>\n\t\t<path d=\"M10 10L10.8333 11.6667L13.3333 9.16667L15.8333 12.5H7.5L10 10Z\" fill=\"#1ABC9C\"/>\n\t\t<path d=\"M1.66667 5V16.6667L3.33333 18.3333H15V16.6667H3.33333V5H1.66667Z\" fill=\"#2D4B6D\"/>\n</svg>);\n\nconst blockAttributes = {\n\timages: {\n\t\ttype: 'array',\n\t\tdefault: []\n\t},\n\tlinkTo: {\n\t\ttype: 'string',\n\t\tdefault: 'none',\n\t},\n\tlayout: {\n\t\ttype: 'string',\n\t\tdefault: 'tiles'\n\t},\n\tanimation: {\n\t\ttype: 'animation',\n\t\tdefault: ''\n\t},\n\tuseDefaults: {\n\t\ttype: 'string',\n\t\tdefault: '\u001cdefault'\n\t},\n\thtmlPreview: {\n\t\ttype: 'text',\n\t\tdefault: null\n\t},\n\tuseDefaults: {\n\t\ttype: 'boolean',\n\t\tdefault: true\n\t},\n\tcaptions: {\n\t\ttype: 'boolean',\n\t\tdefault: false\n\t},\n\tcolumns: {\n\t\ttype: 'number',\n\t\tdefault: 3\n\t},\n\twplrCollection: {\n\t\ttype: 'string',\n\t\tdefault: ''\n\t},\n\twplrFolder: {\n\t\ttype: 'string',\n\t\tdefault: ''\n\t},\n\tgutter: {\n\t\ttype: 'number',\n\t\tdefault: 10\n\t},\n\trowHeight: {\n\t\ttype: 'number',\n\t\tdefault: 140\n\t},\n};\n\nconst buildCoreAttributes = function(attributes) {\n\tconst { align, useDefaults, images, layout, animation, gutter, captions, wplrCollection, wplrFolder, linkTo } = attributes;\n\tlet ids = images.map(x => x.id).join(',');\n\tlet attrs = `ids=\"${ids}\" `;\n\tif (layout)\n\t\tattrs += `layout=\"${layout}\" `;\n\tif (!useDefaults && animation)\n\t\tattrs += `animation=\"${animation}\" `;\n\tif (!useDefaults && gutter)\n\t\tattrs += `gutter=\"${gutter}\" `;\n\tif (!useDefaults) {\n\t\tlet boolCaptions = captions ? 'true' : 'false';\n\t\tattrs += `captions=\"${boolCaptions}\" `;\n\t}\n\tif (wplrCollection)\n\t\tattrs += `wplr-collection=\"${wplrCollection}\" `;\n\tif (wplrFolder)\n\t\tattrs += `wplr-folder=\"${wplrFolder}\" `;\n\tif (linkTo && linkTo !== 'none')\n\t\tattrs += `link=\"${linkTo}\" `;\n\tif (align)\n\t\tattrs += `align=\"${align}\" `;\n\treturn attrs.trim();\n};\n\nconst buildShortcode = function(attributes) {\n\tconst { useDefaults, layout, rowHeight, columns } = attributes;\n\tconst attrs = buildCoreAttributes(attributes);\n\tif (useDefaults)\n\t\treturn `[gallery ${attrs}][/gallery]`;\n\tif (layout === 'tiles')\n\t\treturn `[gallery ${attrs}][/gallery]`;\n\tif (layout === 'cascade')\n\t\treturn `[gallery ${attrs}][/gallery]`;\n\tif (layout === 'masonry')\n\t\treturn `[gallery ${attrs} columns=\"${columns}\"][/gallery]`;\n\tif (layout === 'justified')\n\t\treturn `[gallery ${attrs} row-height=\"${rowHeight}\"][/gallery]`;\n\tif (layout === 'square')\n\t\treturn `[gallery ${attrs} columns=\"${columns}\"][/gallery]`;\n\tif (layout === 'slider')\n\t\treturn `[gallery ${attrs}][/gallery]`;\n\talert(\"This layout is not handled. Check the Console Logs.\");\n\tconsole.log('Layout could not be handled.', attributes);\n}\n\nregisterBlockType( 'meow-gallery/gallery', {\n\ttitle: __( 'Meow Gallery' ),\n\tdescription: __( 'Display photos using specialized layouts for photographers.' ),\n\ticon: meowGalleryIcon,\n\tcategory: 'layout',\n\tkeywords: [ __( 'images' ), __( 'photos' ), __( 'lightroom' ) ],\n\tattributes: blockAttributes,\n\tsupports: {\n\t\talign: [ 'full', 'wide' ],\n\t},\n\n\tedit,\n\n\tsave({ attributes }) {\n\t\tlet str = buildShortcode(attributes);\n\t\treturn (<Fragment>{str}</Fragment>);\n\t},\n\n\tdeprecated: [\n\t\t{\n\t\t\tattributes: blockAttributes,\n\t\t\tsave({ attributes }) {\n\t\t\t\tlet str = buildShortcode(attributes).replace(' captions=\"false\"', '');\n\t\t\t\treturn (<Fragment>{str}</Fragment>);\n\t\t\t}\n\t\t}\n\t],\n\n\ttransforms: {\n\t\tfrom: [\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tisMultiBlock: false,\n\t\t\t\tblocks: [ 'core/gallery' ],\n\t\t\t\ttransform: ({ images }) => {\n\t\t\t\t\treturn createBlock('meow-gallery/gallery', { images: images });\n\t\t\t\t},\n\t\t\t},\n\t\t]\n\t}\n});\n"],"sourceRoot":""}