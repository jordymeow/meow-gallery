{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./blocks/src/edit.js","webpack:///./blocks/src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__","wp","i18n","element","Component","Fragment","components","IconButton","DropZone","PanelBody","RangeControl","CheckboxControl","TextControl","SelectControl","Toolbar","withNotices","editor","BlockControls","MediaUpload","MediaPlaceholder","InspectorControls","mediaUpload","meowGalleryIcon","React","createElement","width","height","viewBox","fill","xmlns","linkOptions","label","ALLOWED_MEDIA_TYPES","pickRelevantMediaFiles","image","alt","id","link","url","caption","GalleryEdit","_this","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","apply","arguments","onSelectImages","_assertThisInitialized","setLinkTo","setColumns","addFiles","uploadFromFiles","state","isBusy","selectedImage","images","newImages","map","props","setAttributes","onRefresh","linkTo","useDefaults","captions","customClass","gutter","htmlPreview","attributes","wplrCollection","wplrFolder","rowHeight","length","col","mgl_gallery_block_params","wplr_collections","find","x","wp_col_id","is_folder","columns","layout","animation","newAttributes","ids","setState","fetch","concat","wpApiSettings","root","cache","headers","user-agent","content-type","method","redirect","referrer","body","JSON","stringify","wplr-collection","wplr-folder","row-height","then","returned","_this2","ok","Error","response","json","data","event","target","files","_this3","currentImages","_this$props","noticeOperations","allowedTypes","filesList","onFileChange","imagesNormalized","onError","createErrorNotice","window","mglCalculateRow","console","log","mglInitCarousels","htmlString","div","document","innerHTML","trim","firstChild","mglInitMaps","htmlPreviewDom","createElementFromHTML","getElementsByTagName","js","innerText","eval","_this$props$attribute","refreshTiles","refreshCarousel","refreshMap","prevProps","_this4","_this$props2","className","isSelected","noticeUI","dropZone","onFilesDrop","hasImagesToShow","controls","onSelect","multiple","gallery","img","render","_ref","open","icon","onClick","setGalleryEmpty","wplrCollections","categories","level","padStart","disabled","unshift","onChange","setWplrCollection","options","accept","labels","title","instructions","notices","setLayout","setAnimation","min","max","setGutter","setRowHeight","checked","setCaptions","setUseDefaults","setCustomClass","style","dangerouslySetInnerHTML","__html","cursor","blocks","registerBlockType","createBlock","blockAttributes","_defineProperty","_blockAttributes","type","default","buildShortcode","attrs","align","join","buildCoreAttributes","shortcode","alert","description","category","keywords","supports","customClassName","html","edit","save","str","deprecated","_ref2","replace","transforms","from","isMultiBlock","transform","_ref3","validImages","filter","_ref4","to","_ref5","_ref6","_ref7"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","const { __ } = wp.i18n;\r\nconst { Component, Fragment } = wp.element;\r\nconst { IconButton, DropZone, PanelBody, RangeControl,\r\n\tCheckboxControl, TextControl, SelectControl, Toolbar, withNotices } = wp.components;\r\nconst { BlockControls, MediaUpload, MediaPlaceholder, InspectorControls, mediaUpload } = wp.editor;\r\n\r\nconst meowGalleryIcon = (<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<rect width=\"20\" height=\"20\" />\r\n\t\t<path d=\"M16.6667 3.33334V13.3333H6.66667V3.33334H16.6667ZM16.6667 1.66667H6.66667L5 3.33334V13.3333L6.66667 15H16.6667L18.3333 13.3333V3.33334L16.6667 1.66667Z\" fill=\"#2D4B6D\"/>\r\n\t\t<path d=\"M10 10L10.8333 11.6667L13.3333 9.16667L15.8333 12.5H7.5L10 10Z\" fill=\"#1ABC9C\"/>\r\n\t\t<path d=\"M1.66667 5V16.6667L3.33333 18.3333H15V16.6667H3.33333V5H1.66667Z\" fill=\"#2D4B6D\"/>\r\n</svg>)\r\n\r\nconst linkOptions = [\r\n\t{ value: 'attachment', label: __( 'Attachment Page' ) },\r\n\t{ value: 'media', label: __( 'Media File' ) },\r\n\t{ value: 'none', label: __( 'None' ) },\r\n];\r\nconst ALLOWED_MEDIA_TYPES = [ 'image' ];\r\n\r\nexport const pickRelevantMediaFiles = ( image ) => {\r\n\tlet { alt, id, link, url, caption } = image;\r\n\treturn { alt, id, link, url, caption };\r\n};\r\n\r\nclass GalleryEdit extends Component {\r\n\tconstructor() {\r\n\t\tsuper( ...arguments );\r\n\t\tthis.onSelectImages = this.onSelectImages.bind( this );\r\n\t\tthis.setLinkTo = this.setLinkTo.bind( this );\r\n\t\tthis.setColumns = this.setColumns.bind( this );\r\n\t\tthis.addFiles = this.addFiles.bind( this );\r\n\t\tthis.uploadFromFiles = this.uploadFromFiles.bind( this );\r\n\r\n\t\tthis.state = {\r\n\t\t\tisBusy: false,\r\n\t\t\tselectedImage: null,\r\n\t\t};\r\n\t}\r\n\r\n\tonSelectImages( images ) {\r\n\t\tlet newImages = images.map(image => pickRelevantMediaFiles(image));\r\n\t\tthis.props.setAttributes({ images: newImages });\r\n\t\tthis.onRefresh({ images: newImages });\r\n\r\n\t}\r\n\r\n\tsetLinkTo( value ) {\r\n\t\tthis.props.setAttributes({ linkTo: value });\r\n\t}\r\n\r\n\tsetUseDefaults( value ) {\r\n\t\tthis.props.setAttributes({ useDefaults: value });\r\n\t\tthis.onRefresh({ useDefaults: value });\r\n\t}\r\n\r\n\tsetCaptions( value ) {\r\n\t\tthis.props.setAttributes({ captions: value });\r\n\t\tthis.onRefresh({ captions: value });\r\n\t}\r\n\r\n\tsetCustomClass( value ) {\r\n\t\tthis.props.setAttributes({ customClass: value });\r\n\t}\r\n\r\n\tsetGutter( value ) {\r\n\t\tthis.props.setAttributes({ gutter: value });\r\n\t\tthis.onRefresh({ gutter: value });\r\n\t}\r\n\r\n\tsetGalleryEmpty() {\r\n\t\tthis.props.setAttributes({ 'images': [], htmlPreview: '' });\r\n\t\tif (this.props.attributes.wplrCollection || this.props.attributes.wplrFolder)\r\n\t\t\tthis.onRefresh({ 'images': [] });\r\n\t}\r\n\r\n\tsetRowHeight(value) {\r\n\t\tthis.props.setAttributes({ 'rowHeight': value });\r\n\t\tthis.onRefresh({ 'rowHeight': value });\r\n\t}\r\n\r\n\tsetWplrCollection(value) {\r\n\t\tif (!value || value === '') {\r\n\t\t\tthis.props.setAttributes({ 'wplrCollection': '', 'wplrFolder': '', htmlPreview: '' });\r\n\t\t\tif (this.props.attributes.images.length)\r\n\t\t\t\tthis.onRefresh({ 'wplrCollection': '', 'wplrFolder': '' });\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst col = mgl_gallery_block_params.wplr_collections.find(x => x.wp_col_id === value);\r\n\t\tcol.is_folder = col.is_folder === '1';\r\n\t\tthis.props.setAttributes({ 'wplrCollection': col.is_folder ? '' : value, 'wplrFolder': col.is_folder ? value : '' });\r\n\t\tthis.onRefresh({ 'wplrCollection': col.is_folder ? '' : value, 'wplrFolder': col.is_folder ? value : '' });\r\n\t}\r\n\r\n\tsetColumns(value) {\r\n\t\tthis.props.setAttributes({ columns: value });\r\n\t\tthis.onRefresh({ columns: value });\r\n\t}\r\n\r\n\tsetLayout(layout) {\r\n\t\tthis.props.setAttributes({ layout: layout });\r\n\t\tthis.onRefresh({ layout });\r\n\t}\r\n\r\n\tsetAnimation(animation) {\r\n\t\tthis.props.setAttributes({ animation: animation });\r\n\t\tthis.onRefresh({ animation });\r\n\t}\r\n\r\n\tasync onRefresh(newAttributes = {}) {\r\n\t\tlet attributes = { ...this.props.attributes, ...newAttributes }\r\n\t\tconst ids = attributes.images.map(x => x.id);\r\n\t\tconst { layout, useDefaults, animation, gutter, columns, rowHeight,\r\n\t\t\tcaptions, wplrCollection, wplrFolder } = attributes;\r\n\t\tthis.setState( { isBusy: true } );\r\n\t\tconst response = await fetch( `${wpApiSettings.root}meow_gallery/preview`, {\r\n\t\t\tcache: 'no-cache',\r\n\t\t\theaders: { 'user-agent': 'WP Block', 'content-type': 'application/json' },\r\n\t\t\tmethod: 'POST',\r\n\t\t\tredirect: 'follow',\r\n\t\t\treferrer: 'no-referrer',\r\n\t\t\tbody: useDefaults ?\r\n\t\t\t\tJSON.stringify({ ids, layout, 'wplr-collection': wplrCollection, 'wplr-folder': wplrFolder }) :\r\n\t\t\t\tJSON.stringify({ ids, layout, gutter, columns, 'row-height': rowHeight, animation,\r\n\t\t\t\t\tcaptions, 'wplr-collection': wplrCollection, 'wplr-folder': wplrFolder })\r\n\t\t})\r\n\t\t.then(returned => {\r\n\t\t\t\tthis.setState({ isBusy: false });\r\n\t\t\t\tif (returned.ok)\r\n\t\t\t\t\treturn returned;\r\n\t\t\t\tthrow new Error('Network response was not ok.');\r\n\t\t\t}\r\n\t\t);\r\n\t\tlet data = await response.json();\r\n\t\tthis.props.setAttributes( { htmlPreview: data } );\r\n\t};\r\n\r\n\tuploadFromFiles( event ) {\r\n\t\tthis.addFiles( event.target.files );\r\n\t}\r\n\r\n\taddFiles( files ) {\r\n\t\tconst currentImages = this.props.attributes.images || [];\r\n\t\tconst { noticeOperations, setAttributes } = this.props;\r\n\t\tmediaUpload( {\r\n\t\t\tallowedTypes: ALLOWED_MEDIA_TYPES,\r\n\t\t\tfilesList: files,\r\n\t\t\tonFileChange: ( images ) => {\r\n\t\t\t\tconst imagesNormalized = images.map( ( image ) => pickRelevantMediaFiles( image ) );\r\n\t\t\t\tlet newImages = currentImages.concat( imagesNormalized );\r\n\t\t\t\tsetAttributes({ images: newImages });\r\n\t\t\t\tthis.onRefresh({ images: newImages });\r\n\t\t\t},\r\n\t\t\tonError: noticeOperations.createErrorNotice,\r\n\t\t} );\r\n\t}\r\n\r\n\trefreshTiles() {\r\n\t\tif (window.mglCalculateRow)\r\n\t\t\tmglCalculateRow();\r\n\t\telse\r\n\t\t\tconsole.log('Meow Gallery: mglCalculateRow does not exist.');\r\n\t}\r\n\r\n\trefreshCarousel() {\r\n\t\tif (window.mglInitCarousels)\r\n\t\t\tmglInitCarousels();\r\n\t\telse\r\n\t\t\tconsole.log('Meow Gallery: mglInitCarousels does not exist.');\r\n\t}\r\n\r\n\tcreateElementFromHTML(htmlString) {\r\n\t\tvar div = document.createElement('div');\r\n\t\tdiv.innerHTML = htmlString.trim();\r\n\t\t// Change this to div.childNodes to support multiple top-level nodes\r\n\t\treturn div.firstChild; \r\n\t}\r\n\r\n\trefreshMap() {\r\n\t\tif (window.mglInitMaps) {\r\n\t\t\tlet htmlPreviewDom = this.createElementFromHTML(this.props.attributes.htmlPreview);\r\n\t\t\tif (htmlPreviewDom.getElementsByTagName('script')[0]) {\r\n\t\t\t\tlet js = htmlPreviewDom.getElementsByTagName('script')[0].innerText;\r\n\t\t\t\teval(js);\r\n\t\t\t\tmglInitMaps();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t\tconsole.log('Meow Gallery: mglInitMaps does not exist.');\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlet { layout, images, wplrCollection, wplrFolder, htmlPreview } = this.props.attributes;\r\n\t\tif (!layout)\r\n\t\t\tthis.props.setAttributes({ layout: 'tiles' });\r\n\t\tif (layout === 'tiles')\r\n\t\t\tthis.refreshTiles();\r\n\t\tif (layout === 'carousel')\r\n\t\t\tthis.refreshCarousel();\r\n\t\tif (layout === 'map')\r\n\t\t\tthis.refreshMap();\r\n\t\tconst hasImagesToShow = images.length > 0 || !!wplrCollection || !!wplrFolder;\r\n\t\tif (hasImagesToShow && !htmlPreview)\r\n\t\t\tthis.onRefresh();\r\n\t}\r\n\r\n\tcomponentDidUpdate( prevProps ) {\r\n\t\tif (this.props.attributes.layout === 'tiles')\r\n\t\t\tthis.refreshTiles();\r\n\t\tif (this.props.attributes.layout === 'carousel')\r\n\t\t\tthis.refreshCarousel();\r\n\t\tif (this.props.attributes.layout === 'map') {\r\n\t\t\tthis.refreshMap();\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { isBusy } = this.state;\r\n\t\tconst { attributes, isSelected, className, noticeOperations, noticeUI } = this.props;\r\n\t\tconst { layout, useDefaults, images, gutter, columns, rowHeight, htmlPreview, animation,\r\n\t\t\tcaptions, wplrCollection, wplrFolder, linkTo, customClass } = attributes;\r\n\t\tconst dropZone = (<DropZone onFilesDrop={ this.addFiles } />);\r\n\t\tconst hasImagesToShow =  images.length > 0 || !!wplrCollection || !!wplrFolder;\r\n\r\n\t\tconst controls = (\r\n\t\t\t<BlockControls>\r\n\t\t\t{hasImagesToShow && (\r\n\t\t\t\t<Toolbar>\r\n\t\t\t\t\t<MediaUpload\r\n\t\t\t\t\t\tonSelect={ this.onSelectImages } allowedTypes={ ALLOWED_MEDIA_TYPES } multiple gallery\r\n\t\t\t\t\t\tvalue={ images.map( ( img ) => img.id ) }\r\n\t\t\t\t\t\trender={ ({ open }) => (\r\n\t\t\t\t\t\t\t<IconButton className=\"components-toolbar__control\" label={ __( 'Edit Gallery' ) }\r\n\t\t\t\t\t\t\t\ticon=\"edit\" onClick={ open } />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<IconButton className=\"components-toolbar__control\" label={ __( 'Remove all' ) }\r\n\t\t\t\t\t\ticon=\"minus\" onClick={() => this.setGalleryEmpty()} />\r\n\t\t\t\t\t<IconButton className=\"components-toolbar__control\" label={ __( 'Refresh' ) }\r\n\t\t\t\t\t\ticon=\"controls-repeat\" onClick={() => this.onRefresh()} />\r\n\t\t\t\t</Toolbar>\r\n\t\t\t)}\r\n\t\t\t</BlockControls>\r\n\t\t);\r\n\r\n\t\tlet wplrCollections = '';\r\n\t\tif (window.mgl_gallery_block_params && mgl_gallery_block_params.wplr_collections) {\r\n\t\t\tlet categories = mgl_gallery_block_params.wplr_collections.map(x => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlabel: (x.level > 0 ? '- ' : '') + x.name.padStart(x.name.length + x.level, \" \"),\r\n\t\t\t\t\tvalue: x.wp_col_id,\r\n\t\t\t\t\tdisabled: x.is_folder === 'true'\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\tcategories.unshift({ label: 'None', value: '' });\r\n\t\t\twplrCollections = (\r\n\t\t\t\t<SelectControl\r\n\t\t\t\t\tlabel={__('LR Folder or Collection', 'meow-gallery')}\r\n\t\t\t\t\tvalue={wplrCollection ? wplrCollection : wplrFolder}\r\n\t\t\t\t\tonChange={value => this.setWplrCollection(value)}\r\n\t\t\t\t\toptions={categories}>\r\n\t\t\t\t</SelectControl>)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t{ controls }\r\n\t\t\t\t{ !hasImagesToShow &&\r\n\t\t\t\t\t<MediaPlaceholder icon={meowGalleryIcon} className={ className } multiple accept=\"image/*\"\r\n\t\t\t\t\t\tlabels={ {\r\n\t\t\t\t\t\t\ttitle: __( 'Meow Gallery' ),\r\n\t\t\t\t\t\t\tinstructions: __( 'Drag images, upload new ones or select files from your library. If WP/LR Sync is installed, you can directly select a collection or a folder from Lightroom.' ),\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\tonSelect={ this.onSelectImages }\r\n\t\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\r\n\t\t\t\t\t\tnotices={ noticeUI }\r\n\t\t\t\t\t\tonError={ noticeOperations.createErrorNotice }\r\n\t\t\t\t\t/> }\r\n\t\t\t\t<InspectorControls>\r\n\t\t\t\t\t<PanelBody title={ __( 'Gallery Settings' ) }>\r\n\t\t\t\t\t\t<SelectControl\r\n\t\t\t\t\t\t\tlabel={__('Layout', 'meow-gallery')}\r\n\t\t\t\t\t\t\tvalue={layout}\r\n\t\t\t\t\t\t\tonChange={(value) => this.setLayout(value)}\r\n\t\t\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t\t\t{ value: 'default', label: 'Default' },\r\n\t\t\t\t\t\t\t\t{ value: 'tiles', label: 'Tiles' },\r\n\t\t\t\t\t\t\t\t{ value: 'masonry', label: 'Masonry' },\r\n\t\t\t\t\t\t\t\t{ value: 'justified', label: 'Justified' },\r\n\t\t\t\t\t\t\t\t{ value: 'square', label: 'Square' },\r\n\t\t\t\t\t\t\t\t{ value: 'cascade', label: 'Cascade' },\r\n\t\t\t\t\t\t\t\t{ value: 'carousel', label: 'Carousel' },\r\n\t\t\t\t\t\t\t\t{ value: 'map', label: 'Map' }\r\n\t\t\t\t\t\t\t]}>\r\n\t\t\t\t\t\t</SelectControl>\r\n\t\t\t\t\t\t{ hasImagesToShow && !useDefaults &&\r\n\t\t\t\t\t\t\t<SelectControl\r\n\t\t\t\t\t\t\t\tlabel={__('Animation', 'meow-gallery')}\r\n\t\t\t\t\t\t\t\tvalue={animation}\r\n\t\t\t\t\t\t\t\tonChange={(value) => this.setAnimation(value)}\r\n\t\t\t\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t\t\t\t{ value: 'default', label: 'Default' },\r\n\t\t\t\t\t\t\t\t\t{ value: 'zoom-out', label: 'Zoom Out' },\r\n\t\t\t\t\t\t\t\t\t{ value: 'zoom-in', label: 'Zoom In' },\r\n\t\t\t\t\t\t\t\t\t{ value: 'fade-out', label: 'Fade Out' },\r\n\t\t\t\t\t\t\t\t\t{ value: 'fade-in', label: 'Fade In' },\r\n\t\t\t\t\t\t\t\t\t{ value: 'colorize', label: 'Colorize' },\r\n\t\t\t\t\t\t\t\t\t{ value: 'highlight', label: 'Highlight' }\r\n\t\t\t\t\t\t\t\t]}>\r\n\t\t\t\t\t\t\t</SelectControl>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<SelectControl\r\n\t\t\t\t\t\t\tlabel={ __( 'Link To' ) }\r\n\t\t\t\t\t\t\tvalue={ linkTo }\r\n\t\t\t\t\t\t\tonChange={ this.setLinkTo }\r\n\t\t\t\t\t\t\toptions={ linkOptions }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{wplrCollections}\r\n\t\t\t\t\t\t{ hasImagesToShow && !useDefaults && <RangeControl\r\n\t\t\t\t\t\t\tlabel={ __( 'Gutter' ) } value={ gutter } min={ 0 } max={ 100 }\r\n\t\t\t\t\t\t\tonChange={ value => this.setGutter(value) }\r\n\t\t\t\t\t\t/> }\r\n\t\t\t\t\t\t{ hasImagesToShow && !useDefaults && (layout === 'masonry' || layout === 'square') && <RangeControl\r\n\t\t\t\t\t\t\tlabel={ __( 'Columns' ) } value={columns} min={2} max={5}\r\n\t\t\t\t\t\t\tonChange={ value => this.setColumns(value) }\r\n\t\t\t\t\t\t/> }\r\n\t\t\t\t\t\t{ hasImagesToShow && !useDefaults && (layout === 'justified') && <RangeControl\r\n\t\t\t\t\t\t\tlabel={ __( 'Row Height' ) } value={rowHeight} min={50} max={500}\r\n\t\t\t\t\t\t\tonChange={ value => this.setRowHeight(value) }\r\n\t\t\t\t\t\t/> }\r\n\t\t\t\t\t\t{ hasImagesToShow && !useDefaults && <CheckboxControl\r\n\t\t\t\t\t\t\tlabel={ __( 'Captions' ) } checked={ captions }\r\n\t\t\t\t\t\t\tonChange={ value => this.setCaptions(value) }\r\n\t\t\t\t\t\t/> }\r\n\t\t\t\t\t\t{ hasImagesToShow && <CheckboxControl\r\n\t\t\t\t\t\t\tlabel={ __( 'Use Default Settings' ) } checked={ useDefaults }\r\n\t\t\t\t\t\t\tonChange={ value => this.setUseDefaults(value) }\r\n\t\t\t\t\t\t/> }\r\n\t\t\t\t\t\t<TextControl\r\n\t\t\t\t\t\t\tlabel={ __( 'Custom CSS Classes' ) } value={customClass}\r\n\t\t\t\t\t\t\tonChange={ value => this.setCustomClass(value) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</PanelBody>\r\n\t\t\t\t</InspectorControls>\r\n\t\t\t\t{ noticeUI }\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{ dropZone }\r\n\t\t\t\t\t{isBusy && (<div className={'mgl-gtb-container' + (isBusy ? ' mgl-busy' : '')}>\r\n\t\t\t\t\t\t<span className='components-spinner' style={{  }} /></div>)}\r\n\t\t\t\t\t{htmlPreview && (<div dangerouslySetInnerHTML={{__html: htmlPreview}}></div>)}\r\n\t\t\t\t\t{hasImagesToShow && !htmlPreview && (<p>Please <a style={{cursor: 'pointer'}}\r\n\t\t\t\t\t\tonClick={() => this.onRefresh()}>click here</a> to refresh the preview.</p>)}\r\n\t\t\t\t\t{/* {!hasImagesToShow && isSelected &&\r\n\t\t\t\t\t\t<div className=\"blocks-gallery-item has-add-item-button\">\r\n\t\t\t\t\t\t\t<FormFileUpload multiple isLarge className=\"block-library-gallery-add-item-button\"\r\n\t\t\t\t\t\t\t\tonChange={ this.uploadFromFiles } accept=\"image/*\" icon=\"insert\">\r\n\t\t\t\t\t\t\t\t{ __( 'Upload an image' ) }\r\n\t\t\t\t\t\t\t</FormFileUpload>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t} */}\r\n\t\t\t\t</div>\r\n\t\t\t</Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withNotices( GalleryEdit );","const { __ } = wp.i18n;\r\nconst { Fragment } = wp.element;\r\nconst { registerBlockType, createBlock } = wp.blocks;\r\n\r\nimport { default as edit } from './edit';\r\n\r\nconst meowGalleryIcon = (<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<rect width=\"20\" height=\"20\" fill=\"white\"/>\r\n\t\t<path d=\"M16.6667 3.33334V13.3333H6.66667V3.33334H16.6667ZM16.6667 1.66667H6.66667L5 3.33334V13.3333L6.66667 15H16.6667L18.3333 13.3333V3.33334L16.6667 1.66667Z\" fill=\"#2D4B6D\"/>\r\n\t\t<path d=\"M10 10L10.8333 11.6667L13.3333 9.16667L15.8333 12.5H7.5L10 10Z\" fill=\"#1ABC9C\"/>\r\n\t\t<path d=\"M1.66667 5V16.6667L3.33333 18.3333H15V16.6667H3.33333V5H1.66667Z\" fill=\"#2D4B6D\"/>\r\n</svg>);\r\n\r\nconst blockAttributes = {\r\n\tcustomClass: {\r\n\t\ttype: 'string',\r\n\t\tdefault: ''\r\n\t},\r\n\timages: {\r\n\t\ttype: 'array',\r\n\t\tdefault: []\r\n\t},\r\n\tlinkTo: {\r\n\t\ttype: 'string',\r\n\t\tdefault: 'none',\r\n\t},\r\n\tlayout: {\r\n\t\ttype: 'string',\r\n\t\tdefault: 'tiles'\r\n\t},\r\n\tanimation: {\r\n\t\ttype: 'animation',\r\n\t\tdefault: ''\r\n\t},\r\n\tuseDefaults: {\r\n\t\ttype: 'string',\r\n\t\tdefault: '\u001cdefault'\r\n\t},\r\n\thtmlPreview: {\r\n\t\ttype: 'text',\r\n\t\tdefault: null\r\n\t},\r\n\tuseDefaults: {\r\n\t\ttype: 'boolean',\r\n\t\tdefault: true\r\n\t},\r\n\tcaptions: {\r\n\t\ttype: 'boolean',\r\n\t\tdefault: false\r\n\t},\r\n\tcolumns: {\r\n\t\ttype: 'number',\r\n\t\tdefault: 3\r\n\t},\r\n\twplrCollection: {\r\n\t\ttype: 'string',\r\n\t\tdefault: ''\r\n\t},\r\n\twplrFolder: {\r\n\t\ttype: 'string',\r\n\t\tdefault: ''\r\n\t},\r\n\tgutter: {\r\n\t\ttype: 'number',\r\n\t\tdefault: 10\r\n\t},\r\n\trowHeight: {\r\n\t\ttype: 'number',\r\n\t\tdefault: 140\r\n\t},\r\n};\r\n\r\nconst buildCoreAttributes = function(attributes) {\r\n\tconst { align, useDefaults, images, layout, animation, gutter, captions, wplrCollection, wplrFolder, linkTo, customClass } = attributes;\r\n\tlet ids = images.map(x => x.id).join(',');\r\n\tlet attrs = `ids=\"${ids}\" `;\r\n\tif (layout)\r\n\t\tattrs += `layout=\"${layout}\" `;\r\n\tif (!useDefaults && animation)\r\n\t\tattrs += `animation=\"${animation}\" `;\r\n\tif (!useDefaults && gutter)\r\n\t\tattrs += `gutter=\"${gutter}\" `;\r\n\tif (!useDefaults) {\r\n\t\tlet boolCaptions = captions ? 'true' : 'false';\r\n\t\tattrs += `captions=\"${boolCaptions}\" `;\r\n\t}\r\n\tif (wplrCollection)\r\n\t\tattrs += `wplr-collection=\"${wplrCollection}\" `;\r\n\tif (wplrFolder)\r\n\t\tattrs += `wplr-folder=\"${wplrFolder}\" `;\r\n\tif (linkTo && linkTo !== 'none')\r\n\t\tattrs += `link=\"${linkTo}\" `;\r\n\tif (align)\r\n\t\tattrs += `align=\"${align}\" `;\r\n\tif (customClass)\r\n\t\tattrs += `custom-class=\"${customClass}\" `;\r\n\treturn attrs.trim();\r\n};\r\n\r\nconst buildShortcode = function(attributes) {\r\n\tconst { useDefaults, layout, rowHeight, columns, customClass } = attributes;\r\n\tconst attrs = buildCoreAttributes(attributes);\r\n\tlet shortcode = '';\r\n\tif (useDefaults)\r\n\t\tshortcode = `[gallery ${attrs}][/gallery]`;\r\n\telse if (layout === 'tiles')\r\n\t\tshortcode = `[gallery ${attrs}][/gallery]`;\r\n\telse if (layout === 'cascade')\r\n\t\tshortcode = `[gallery ${attrs}][/gallery]`;\r\n\telse if (layout === 'masonry')\r\n\t\tshortcode = `[gallery ${attrs} columns=\"${columns}\"][/gallery]`;\r\n\telse if (layout === 'justified')\r\n\t\tshortcode = `[gallery ${attrs} row-height=\"${rowHeight}\"][/gallery]`;\r\n\telse if (layout === 'square')\r\n\t\tshortcode = `[gallery ${attrs} columns=\"${columns}\"][/gallery]`;\r\n\telse if (layout === 'slider')\r\n\t\tshortcode = `[gallery ${attrs}][/gallery]`;\r\n\telse if (layout === 'map')\r\n\t\tshortcode = `[gallery ${attrs}][/gallery]`;\r\n\telse {\r\n\t\talert(\"This layout is not handled. Check the Console Logs.\");\r\n\t\tconsole.log('Layout could not be handled.', attributes);\r\n\t}\r\n\treturn shortcode;\r\n}\r\n\r\nregisterBlockType( 'meow-gallery/gallery', {\r\n\ttitle: __( 'Meow Gallery' ),\r\n\tdescription: __( 'Display photos using specialized layouts for photographers.' ),\r\n\ticon: meowGalleryIcon,\r\n\tcategory: 'layout',\r\n\tkeywords: [ __( 'images' ), __( 'photos' ), __( 'lightroom' ) ],\r\n\tattributes: blockAttributes,\r\n\tsupports: {\r\n\t\tclassName: false,\r\n\t\tcustomClassName: false,\r\n\t\thtml: true,\r\n\t\talign: [ 'full', 'wide' ],\r\n\t},\r\n\r\n\tedit,\r\n\r\n\tsave({ attributes }) {\r\n\t\tlet str = buildShortcode(attributes);\r\n\t\treturn (<Fragment>{str}</Fragment>);\r\n\t},\r\n\r\n\tdeprecated: [\r\n\t\t{\r\n\t\t\tattributes: blockAttributes,\r\n\t\t\tsave({ attributes }) {\r\n\t\t\t\tlet str = buildShortcode(attributes).replace(' captions=\"false\"', '');\r\n\t\t\t\treturn (<Fragment>{str}</Fragment>);\r\n\t\t\t}\r\n\t\t}\r\n\t],\r\n\r\n\ttransforms: {\r\n\t\tfrom: [\r\n\t\t\t{\r\n\t\t\t\ttype: 'block',\r\n\t\t\t\tisMultiBlock: false,\r\n\t\t\t\tblocks: [ 'core/gallery' ],\r\n\t\t\t\ttransform: ({ images }) => {\r\n\t\t\t\t\treturn createBlock('meow-gallery/gallery', { images: images });\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttype: 'block',\r\n\t\t\t\tisMultiBlock: true,\r\n\t\t\t\tblocks: [ 'core/image' ],\r\n\t\t\t\ttransform: ( attributes ) => {\r\n\t\t\t\t\tconst validImages = attributes.filter(x => x.id && x.url);\r\n\t\t\t\t\treturn createBlock( 'meow-gallery/gallery', {\r\n\t\t\t\t\t\timages: validImages.map( ( { id, url, alt, caption } ) => ( { id, url, alt, caption } ) )\r\n\t\t\t\t\t} );\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t],\r\n\t\tto: [\r\n\t\t\t{\r\n\t\t\t\ttype: 'block',\r\n\t\t\t\tblocks: [ 'core/image' ],\r\n\t\t\t\ttransform: ( { images, align } ) => {\r\n\t\t\t\t\tif ( images.length > 0 ) {\r\n\t\t\t\t\t\treturn images.map( ( { id, url, alt, caption } ) => createBlock( 'core/image', { id, url, alt, caption, align } ) );\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn createBlock( 'core/image', { align } );\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttype: 'block',\r\n\t\t\t\tblocks: [ 'core/gallery' ],\r\n\t\t\t\ttransform: ( { images, align } ) => {\r\n\t\t\t\t\treturn createBlock( 'core/gallery', { images, align } );\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t],\r\n\t}\r\n});\r\n"],"sourceRoot":""}